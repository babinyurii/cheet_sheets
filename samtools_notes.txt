### converting sam file into bam
samtools view -b -S -o sal_sej.bam sal_sej.sam
# -b : output is bam
# -S : input is sam
# -o : output file name


### viewing bam files (view command)
samtool view sal_sej.bam | less


### sort reads by flag specified and show them
samtools -f 4 sal_sej.bam | less
# -f INT show flag matches
samtools -F 4 sal_sej.bam | less
# -F INT show reads excepting flag matches


### count reads (-c) by flag specified
samtool view -c -f 4 sal_sej.bam

### count reads by quality value specified (-q) (>=)
samtools view -q 42 -c sal_sej.bam
# -q : minimal quality value


### sorting bam file by genome position
samtools sort sal_sej.bam sal_sej_sorted.bam

### indexing sorted file
samtools index sal_sej_sorted.bam.bam
# ouput is file.bai
# always index sorted files


### identifying genome variants (mpileup command)
samtools mpileup -g -f sal_ref_sej.fasta sal_sej_sorted.bam.bam > sal_vars.bcf
# -g : output is bcf (binary call format) file
# -f : use reference genome given


### calling snp and indels
bcftools view -c -v sal_vars.bcf > sal_vars.vcf
# -c : find snp
# -v : output only potential variants
### note: new command is "call". type "bcftools" to see current version and commands

### show alignment
samtools tview sal_sej_sorted.bam.bam sal_ref_sej.fasta
# first arg is sorted bam file
# second arg is reference 


